(this["webpackJsonpvaccine-notifire-ui"]=this["webpackJsonpvaccine-notifire-ui"]||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){},162:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(13),c=n.n(r),s=(n(160),n(161),n(136)),o=n(322),l=n(14),d=n(51),u=(n(162),n(11)),b=n(309),j=n(310),m=n(141),p=n(325),h=n(307),f=n(20),x=n.n(f),g=n(31),O=n(36),v=n(300),y=n(329),w=n(303),S=n(304),C=n(323),k=n(306),N=n(308),_=n(324),I=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(null),c=Object(u.a)(r,2),s=c[0],o=c[1],l=Object(a.useRef)([]),d=Object(a.useCallback)(function(){var e=Object(g.a)(x.a.mark((function e(t){var n,a,r,c,s,d,u=arguments;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"GET",a=u.length>2&&void 0!==u[2]?u[2]:null,r=u.length>3&&void 0!==u[3]?u[3]:{},e.prev=3,i(!0),c=new AbortController,l.current.push(c),e.next=9,fetch(t,{method:n,body:a,headers:r,signal:c.signal});case 9:return s=e.sent,e.next=12,s.json();case 12:if(d=e.sent,l.current=l.current.filter((function(e){return e!==c})),s.ok){e.next=16;break}throw new Error(d.message);case 16:return i(!1),e.abrupt("return",d);case 20:throw e.prev=20,e.t0=e.catch(3),o(e.t0.message||"Somthing went wrong."),i(!1),new Error(e.t0.message);case 25:case"end":return e.stop()}}),e,null,[[3,20]])})));return function(t){return e.apply(this,arguments)}}(),[]);Object(a.useEffect)((function(){return function(){l.current.forEach((function(e){return e.abort()}))}}),[]);return{isLoading:n,error:s,sendRequest:d,clearError:function(){o(null)}}},T=n(3),F=Object(_.a)((function(e){return{root:{"& .MuiDialog-paperWidthSm":{width:"40vw","@media(max-width: 700px)":{width:"85vw"}},"& .MuiDialogTitle-root":{backgroundColor:e.palette.primary.main,color:"white"}},content:{display:"flex",justifyContent:"center",padding:e.spacing(2),flexDirection:"column"},actions:{padding:"10px"},btn:{"&:disabled":{cursor:"not-allowed"},margin:"auto"}}})),R=/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/,B=Object(a.forwardRef)((function(e,t){return Object(T.jsx)(v.a,Object(O.a)({direction:"down",ref:t},e))})),L=function(e){var t=F(),n=Object(a.useState)(""),i=Object(u.a)(n,2),r=i[0],c=i[1],s=Object(a.useState)(!1),o=Object(u.a)(s,2),l=o[0],d=o[1],b=I(),j=b.isLoading,p=b.sendRequest,f=e.open,O=e.onCloseModal,v=e.title,_=e.userData,L=e.stateId,z=e.districtId,V=e.unSubScribe,A=function(){var e=Object(g.a)(x.a.mark((function e(t){var n,a,i;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V){e.next=14;break}return n=_.ageGroup,a={minAge:n,districtId:z,stateId:L,emailId:t},e.prev=3,e.next=6,p("https://api.vaccinenotifier.co.in/vaccine-notifier/addSubscriber","POST",JSON.stringify(a),{"Content-Type":"application/json"});case 6:alert("You have successfully subcribed for email notification, you will receive an email as soon as centers are available. In case you do not receive the email, please check your Spam folder just in case the email got delivered there instead of your inbox."),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),alert("Sorry somthing went wrong, please try again later.");case 12:e.next=24;break;case 14:return i={emailId:t},e.prev=15,e.next=18,p("https://api.vaccinenotifier.co.in/vaccine-notifier/deleteSubscriber","POST",JSON.stringify(i),{"Content-Type":"application/json"});case 18:alert("You have successfully un-subscribe for email notification, you will not receive any email."),e.next=24;break;case 21:e.prev=21,e.t1=e.catch(15),alert("Sorry somthing went wrong, please try again later.");case 24:O();case 25:case"end":return e.stop()}}),e,null,[[3,9],[15,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(y.a,{open:f,TransitionComponent:B,onClose:O,className:t.root,children:[Object(T.jsx)(w.a,{children:v}),Object(T.jsxs)(S.a,{className:t.content,children:[Object(T.jsx)(C.a,{fullWidth:!0,variant:"outlined",label:"Email",value:r,onChange:function(e){c(e.target.value);var t=R.test(e.target.value);d(t)},required:!0}),V?null:Object(T.jsx)(m.a,{variant:"subtitle2",children:"Please provide an active email address."})]}),Object(T.jsx)(k.a,{className:t.actions,children:j?Object(T.jsxs)("div",{style:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:[Object(T.jsx)(N.a,{size:30})," "]}):Object(T.jsx)(h.a,{className:t.btn,variant:"contained",color:"primary",disabled:!l,onClick:function(){return A(r)},children:"Submit"})})]})};var z=function(e){var t=Object(a.useState)(!1),n=Object(u.a)(t,2),i=n[0],r=n[1],c=Object(l.h)().search,s=new URLSearchParams(c).get("unSubscribe"),o=Object(a.useCallback)((function(){r(!0)}),[]);return Object(a.useEffect)((function(){"true"===s&&o()}),[s,o]),Object(T.jsxs)("div",{children:[Object(T.jsx)(L,{title:"Unsubscribe from email notification",unSubScribe:!0,open:i,onCloseModal:function(){r(!1)}}),Object(T.jsx)(b.a,{position:"fixed",children:Object(T.jsxs)(j.a,{children:[Object(T.jsx)(m.a,{variant:"h6",children:"VaccineNotifier"}),Object(T.jsx)(p.a,{flexGrow:"1"}),Object(T.jsx)(h.a,{variant:"outlined",color:"secondary",onClick:o,children:"Un-subscribe"})]})})]})},V=n(321),A=n(137),E=n(314),G=n(315),W=n(305),D=n(332),P=n(316),M=n(326),q=n(55),H=n(65),J=n(311),U=n(312),Y=(n(267),function(e){var t=Object(q.b)(e),n=Object(u.a)(t,2),a=n[0],r=n[1],c=r.error&&r.touched?r.error:"",s=e.visiblilitytoggler;return Object(T.jsx)(i.a.Fragment,{children:Object(T.jsxs)("div",{className:"Input",children:[Object(T.jsx)(C.a,Object(O.a)({autoComplete:"off",type:e.type,name:e.name,helperText:c,style:{maxWidth:"35rem",width:"100%"},variant:"outlined",label:e.label,error:r.error&&r.touched,multiline:e.isMultiline,rows:4},a)),"true"===e.visibilityicon?Object(T.jsx)("div",{onClick:s,className:0===c.length?"Icon":["Icon","IconInvalid"].join(" "),children:"password"===e.type?Object(T.jsx)(J.a,{color:"primary"}):Object(T.jsx)(U.a,{color:"primary"})}):null]})})}),Z=n(327),$=i.a.forwardRef((function(e,t){var n=Object(q.b)(e),a=Object(u.a)(n,2),i=a[0],r=a[1],c=e.options,s=e.name,o=e.type,l=e.label,d=e.onChange,b=e.disabled;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)("div",{className:"Input",children:Object(T.jsx)(Z.a,{options:c,getOptionLabel:function(e){return e.name||""},onChange:d,disabled:b,renderInput:function(e){return Object(T.jsx)(C.a,Object(O.a)(Object(O.a)(Object(O.a)({label:l,type:o||"text"},e),i),{},{name:s,inputProps:Object(O.a)(Object(O.a)({},e.inputProps),{},{autoComplete:"off"}),error:r.error&&r.touched,variant:"outlined",autoComplete:"off"}))}})}),r.error&&r.touched?Object(T.jsx)("span",{style:{color:"red"},children:r.error}):null]})})),K=Object(_.a)({root:{alignItems:"center",justifyContent:"space-around",display:"flex",width:"100%",padding:"0.5rem",flexWrap:"wrap",height:"100%","@media(max-width : 52rem)":{width:"100%"}},formContainer:{padding:"2rem 1rem",textAlign:"center",width:"25rem"},sybmitBtn:{marginTop:"1rem"}}),Q=function(e){var t=K(),n=Object(a.useState)([{id:null,name:""}]),i=Object(u.a)(n,2),r=i[0],c=i[1],s=Object(a.useState)([{id:null,name:""}]),o=Object(u.a)(s,2),l=o[0],d=o[1],b=Object(a.useState)(!0),j=Object(u.a)(b,2),m=j[0],f=j[1],O=Object(a.useState)(""),v=Object(u.a)(O,2),y=v[0],w=v[1],S=Object(a.useState)(""),C=Object(u.a)(S,2),k=C[0],N=C[1],_=Object(a.useState)(),F=Object(u.a)(_,2),R=F[0],B=F[1],z=Object(a.useState)(),V=Object(u.a)(z,2),J=V[0],U=V[1],Z=Object(a.useState)(!1),Q=Object(u.a)(Z,2),X=Q[0],ee=Q[1],te=Object(a.useState)(!1),ne=Object(u.a)(te,2),ae=ne[0],ie=ne[1],re=e.searchHandler,ce=I().sendRequest;Object(a.useEffect)((function(){try{(function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce("https://cdn-api.co-vin.in/api/v2/admin/location/states");case 2:t=e.sent,c(t.states.map((function(e){return{id:e.state_id,name:e.state_name}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}catch(e){alert("Somthing went wrong while fetching all states, please try again later.")}}),[ce]);var se=function(){var e=Object(g.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce("https://cdn-api.co-vin.in/api/v2/admin/location/districts/".concat(t));case 3:n=e.sent,d(n.districts.map((function(e){return{id:e.district_id,name:e.district_name}}))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Somthing went wrong while fetching districts, please try again later.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){ee(!1)},le=function(){ee(!0)};return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(q.a,{enableReinitialize:!0,initialValues:{state:"",district:"",pincode:"",ageGroup:18},validationSchema:H.a({pincode:H.b().trim().length(6),state:H.b().required().oneOf(r.map((function(e){return e.name})),"select a valid state"),district:H.b().required("please provide a valid district").oneOf(l.map((function(e){return e.name})),"select a valid district or select again from the list")}),onSubmit:function(e,t){var n=t.setSubmitting;t.resetForm,Object(A.a)(t,["setSubmitting","resetForm"]);n(!1),re(J,e.ageGroup,ae),ie(!0)},children:function(e){return Object(T.jsxs)(E.a,{className:t.root,maxWidth:"md",children:[Object(T.jsx)(L,{open:X,title:"Enter your email to get email notification",onCloseModal:oe,stateId:R,districtId:J,userData:e.values}),Object(T.jsx)(G.a,{className:t.formContainer,children:Object(T.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(T.jsx)($,{name:"state",options:r,label:"State",inputValue:k,disabled:!1,onChange:function(){var t=Object(g.a)(x.a.mark((function t(n,a){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se(null===a||void 0===a?void 0:a.id);case 2:f(!1),a?(N(null===a||void 0===a?void 0:a.name),e.setFieldValue("state",null===a||void 0===a?void 0:a.name),B(null===a||void 0===a?void 0:a.id),ie(!1)):(w(""),N(""),f(!0),B(null),U(null),e.setFieldValue("district",""),e.setFieldValue("state",""));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}),Object(T.jsx)($,{name:"district",options:l,disabled:m,label:"District",inputValue:y,onChange:function(t,n){e.setFieldValue("district",null===n||void 0===n?void 0:n.name),null!==n?(w(null===n||void 0===n?void 0:n.name),U(null===n||void 0===n?void 0:n.id),ie(!1)):(w(""),U(null))}}),Object(T.jsx)(Y,{name:"pincode",label:"Pincode",variant:"outlined"}),Object(T.jsx)(W.a,{component:"legend",style:{textAlign:"initial",paddingLeft:"1rem",paddingTop:"0.5rem"},children:"Age Group"}),Object(T.jsxs)(D.a,{"aria-label":"age-group",style:{flexDirection:"row",paddingLeft:"1rem"},value:e.values.ageGroup,onChange:function(t){e.setFieldValue("ageGroup",+t.target.value)},children:[Object(T.jsx)(P.a,{value:18,control:Object(T.jsx)(M.a,{}),label:"18+"}),Object(T.jsx)(P.a,{value:45,control:Object(T.jsx)(M.a,{}),label:"45+"})]}),Object(T.jsxs)(p.a,{display:"flex",width:"100%",justifyContent:"space-around",children:[Object(T.jsx)(h.a,{type:"button",size:"large",variant:"outlined",color:"primary",disabled:!(e.isValid&&e.dirty),className:t.sybmitBtn,onClick:le,children:"Notify me"}),Object(T.jsx)(h.a,{type:"submit",size:"large",variant:"contained",disabled:!e.isValid||e.isSubmitting,color:"primary",className:t.sybmitBtn,children:"Search"})]})]})})]})}})})},X=n(317),ee=n(318),te=n(319),ne=n(140),ae=n(331),ie=n(320),re=Object(_.a)((function(e){return{cardRoot:{minWidth:375,maxWidth:375,overflow:"auto","@media(max-width: 700px)":{minWidth:300,maxWidth:300,margin:"auto"}},root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",width:"max-content",backgroundColor:e.palette.background.paper,"& .MuiGridListTile-tile":{display:"flex"},"@media(max-width: 700px)":{maxWidth:"100%",margin:"auto"}},gridList:{flexWrap:"nowrap",transform:"translateZ(0)"},title:{color:e.palette.primary.light},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"},ft1_1:{"@media(max-width: 700px)":{fontSize:"1.1rem"}},ft0_9:{"@media(max-width: 700px)":{fontSize:"0.9rem"}},mobileView:{"@media(max-width: 700px)":{flexDirection:"column",borderBottom:"3px solid #1c405491",padding:5,marginLeft:-e.spacing(1),marginRight:-e.spacing(1)}}}})),ce=function(e){var t=e.name,n=e.pincode,a=e.sessions,i=e.state_name,r=e.district_name,c=e.block_name,s=e.fee_type,o=re();return Object(T.jsxs)(p.a,{display:"flex",justifyContent:"flex-start",gridGap:"0.5rem",marginBottom:"1rem",className:o.mobileView,children:[Object(T.jsx)(G.a,{className:o.cardRoot,children:Object(T.jsxs)(X.a,{children:[Object(T.jsx)(m.a,{className:o.ft1_1,variant:"h5",component:"h4",children:t}),Object(T.jsxs)(m.a,{className:o.ft0_9,color:"textSecondary",children:[c,", ",i,", ",r,", ",n]}),Object(T.jsxs)(m.a,{variant:"h5",component:"h3",style:{fontSize:"1rem"},children:["Fees: "," ","Free"===s?Object(T.jsx)("strong",{style:{color:"#1ab64f"},children:s}):Object(T.jsx)("strong",{children:s})]})]})}),Object(T.jsx)("div",{className:o.root,children:Object(T.jsx)(ee.a,{className:o.gridList,children:a.map((function(e){return Object(T.jsxs)(te.a,{style:{width:"fit-content",height:"auto",display:"flex"},children:[Object(T.jsxs)(ne.a,{elevation:0,style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center",height:"100%",padding:"1rem"},children:[Object(T.jsx)(m.a,{variant:"h5",component:"h3",style:{fontSize:"1rem"},children:e.date}),Object(T.jsx)(ae.a,{color:"primary",label:e.available_capacity}),Object(T.jsxs)(m.a,{variant:"h5",component:"span",style:{fontSize:"1rem",marginTop:"0.4rem",color:18===e.min_age_limit?"#1ab64f":"#d53b4c"},children:[e.min_age_limit,"+"]}),Object(T.jsx)(m.a,{variant:"h5",component:"p",style:{fontSize:"0.8rem",marginTop:"0.4rem"},children:e.vaccine})]}),Object(T.jsx)(ie.a,{orientation:"vertical",style:{height:"100%"}})]},e.session_id)}))})})]})},se=function(e){return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("div",{style:{position:"fixed",width:"100vw",height:"100vh",zIndex:"100",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.4)",top:"0",left:"0"},children:Object(T.jsx)(N.a,{size:50})})})},oe=Object(_.a)((function(e){return{slotHeading:{borderBottom:"1px solid #1c4e6ba3",marginTop:-e.spacing(1),marginRight:-e.spacing(1),marginBottom:e.spacing(1),marginLeft:-e.spacing(1),textAlign:"center",backgroundColor:e.palette.primary.main,padding:"0.5rem 0"},noResults:{"@media(max-width: 700px)":{height:"220px"}}}})),le=function(e){var t=oe(),n=Object(l.h)(),i=I(),r=i.isLoading,c=i.sendRequest,s=Object(a.useState)([]),o=Object(u.a)(s,2),d=o[0],b=o[1],j=e.refreshRedults,h=new URLSearchParams(n.search),f=h.get("districtId"),O=h.get("minAge");return Object(a.useEffect)((function(){(function(){var e=Object(g.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c("https://api.vaccinenotifier.co.in/vaccine-notifier/getNextSlot?district_id=".concat(f,"&minAge=").concat(O));case 3:t=e.sent,b(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert("Somthing went wrong while searching suitable centers for you, please try again later.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[c,f,O,j]),Object(T.jsx)(T.Fragment,{children:r?Object(T.jsx)(se,{}):Object(T.jsxs)(p.a,{overflow:"auto",maxHeight:"58vh",border:"1px solid #1c4e6ba3",padding:"0.5rem",children:[Object(T.jsx)("div",{className:t.slotHeading,children:Object(T.jsx)(m.a,{variant:"h4",component:"h5",style:{color:"white"},children:"Available Centers"})}),d.length>0?d.map((function(e){return Object(T.jsx)(ce,{name:e.name,pincode:e.pincode,sessions:e.sessions,state_name:e.state_name,district_name:e.district_name,block_name:e.block_name,fee_type:e.fee_type},e.center_id)})):Object(T.jsx)(p.a,{className:t.noResults,height:"175px",display:"flex",justifyContent:"center",flexDirection:"column",children:Object(T.jsxs)("ul",{children:[Object(T.jsx)("li",{children:Object(T.jsx)(m.a,{variant:"h6",component:"strong",style:{fontSize:"16.5px"},children:"Sorry, we could not find centers for you now. Please provide us your email by clicking NOTIFY ME button. You will receive an email as soon as centers are availabe in your district."})}),Object(T.jsx)("li",{children:Object(T.jsx)(m.a,{children:"Meanwhile, please sanatize your hands regularly, wear mask and maintain social distancing."})}),Object(T.jsx)("li",{children:Object(T.jsx)(m.a,{children:"Thank you for using VaccineNotifier."})})]})})]})})},de=Object(_.a)((function(e){return{root:{padding:e.spacing(3),"@media(max-width: 700px)":{padding:e.spacing(1)}},slotGrid:{marginTop:e.spacing(3),padding:e.spacing(1),"@media(max-width: 700px)":{maxHeight:"40vh"}},slotHeading:{borderBottom:"1px solid #1c4e6ba3",marginTop:0,marginRight:-e.spacing(1),marginBottom:e.spacing(1),marginLeft:-e.spacing(1),textAlign:"center"},bookSlotBtn:{margin:"auto",marginTop:e.spacing(2),marginBottom:e.spacing(2)}}})),ue=function(e){var t=Object(a.useState)(0),n=Object(u.a)(t,2),i=n[0],r=n[1],c=Object(l.g)(),s=de();return Object(T.jsxs)(V.a,{style:{width:"100%"},className:s.root,container:!0,direction:"column",children:[Object(T.jsx)(V.a,{item:!0,xs:12,md:12,lg:12,xl:12,children:Object(T.jsx)(Q,{searchHandler:function(e,t,n){n&&r((function(e){return e+1})),c.push("/home/nextAvailableSlots?districtId=".concat(e,"&minAge=").concat(t))}})}),Object(T.jsx)(V.a,{item:!0,xs:12,md:12,lg:12,xl:12,className:s.slotGrid,children:Object(T.jsxs)(l.b,{path:"/home/nextAvailableSlots",children:[Object(T.jsx)(le,{refreshRedults:i}),Object(T.jsx)(p.a,{width:"100%",display:"flex",justifyContent:"center",children:Object(T.jsx)(h.a,{className:s.bookSlotBtn,color:"primary",variant:"contained",onClick:function(){window.open("https://www.cowin.gov.in/home")},children:"Book your slot"})})]})})]})};var be=function(e){var t=Object(T.jsxs)(l.d,{children:[Object(T.jsx)(l.b,{path:"/home",children:Object(T.jsx)(ue,{})}),Object(T.jsx)(l.a,{to:"/home"})]});return Object(T.jsxs)(d.a,{children:[Object(T.jsx)(z,{}),Object(T.jsx)("main",{children:t})]})},je=Object(s.a)({palette:{primary:{main:"#0a4e6b",light:"#457a99",dark:"#002640"},secondary:{main:"#65f384",light:"#9dffb5",dark:"#20bf55"}}});var me=function(){return Object(T.jsx)(o.a,{theme:je,children:Object(T.jsx)(be,{})})},pe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,333)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))};c.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(me,{})}),document.getElementById("root")),pe()}},[[268,1,2]]]);
//# sourceMappingURL=main.d31d8d32.chunk.js.map